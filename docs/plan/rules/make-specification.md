# 要件定義書作成ガイド

このドキュメントでは、要件定義書作成のプロセスとベストプラクティスについて説明します。品質の高い要件定義書を作成することで、開発プロセスの効率化と成果物の品質向上を目指しています。

## 役割と責任

要件定義担当者は以下の役割と責任を持ちます：

- web Front end エンジニアのプロフェッショナルとして機能する
- 実装要求に対して質問を投げかけ、懸念事項や不確実性を解消する
- 収集した要求を実装要件として整理する
- Juniorエンジニアが迷いなく開発できる要件定義書を作成する

## 要件定義プロセス

### 要求から実装要件への詳細化

要件定義担当者は、渡された要求をJuniorエンジニアが理解できる要件定義書に変換するために以下の作業を行います：

- 開発イメージや要求から、明確な要件定義書を作成する
- 一回のやり取りだけでは懸念事項や不確実性を解消できないため、質問を繰り返して要求を詳細化する
- 要件の詳細化では実装方針や実装方法の詳細提案は不要。ページ、機能、コンポーネントの仕様精緻化に集中する
- 実装方法ではなく、要求の詳細化に焦点を当て、未確定情報を最小限にする
- 情報不足や未確定要求は必ず確認する

## 成果物と出力形式

要件定義プロセスの成果物として以下を作成します：

- **要件定義書**: `1XX_specification.md`（1XXは100番台の連番）

### ファイル命名規則
- 要件定義書は `1XX_specification.md` の形式で命名します（例: `101_specification.md`）
- 1XXは100番台から始まる連番で、要件定義書専用のナンバリングです
- 一つの要件定義書が500行を超える場合は、新しいファイルを作成します
- 関連する要件は可能な限り同じファイルにまとめますが、ファイルサイズの制約を優先します

### 複数ファイルの管理
- 要件定義書が複数のファイルに分かれる場合は、各ファイルの先頭に相互参照リンクを追加します
- 各ファイルの冒頭には、そのファイルが対象とする機能カテゴリを明記します

- 最終的な出力はコピペしやすいよう、コードブロック内にマークダウン形式で提供する

## 要件定義書の構成

要件定義書は以下の構造に従って作成します：

```markdown
# [機能/ページ名] 要件定義書

## 📑 関連ドキュメント

- [関連する要件定義書へのリンク]
- [前後の要件定義書への参照]

## 📋 概要

[機能やページの目的と役割の簡潔な説明]

## 🎯 要求

- [要求1]
- [要求2]
- [要求3]

## 📝 機能仕様

### 画面/コンポーネント構成

[UI要素や画面構成の詳細]

### 振る舞い

[ユーザー操作と機能の反応についての詳細]

### 制約条件

[技術的・ビジネス的制約条件]

## 📊 データ要件

[必要なデータ構造や取得方法]

## 🔄 インタラクション

[他システムやコンポーネントとの連携]

## ❓ 未解決の質問

[解決が必要な質問や不明点]
```

## 要件定義書作成のポイント

1. **明確かつ具体的に**
   - 曖昧な表現を避け、明確な言葉で要件を記述する
   - 具体的な例や条件を含める

2. **完全性を重視**
   - すべての必要な情報を含める
   - エッジケースや例外ケースも考慮する

3. **一貫性のある用語**
   - プロジェクト全体で一貫した用語を使用する
   - 専門用語は必要に応じて説明を加える

4. **優先順位と依存関係**
   - 要件の優先順位を明示する
   - 機能間の依存関係を明確にする

## ファイル管理のベストプラクティス

### ファイル分割の基準

1. **機能単位での分割**
   - 関連する機能は可能な限り同じファイルにまとめる
   - 機能間の関係性が弱い場合は異なるファイルに分割する

2. **ファイルサイズの管理**
   - 1つのファイルが500行を超える場合は分割を検討する
   - 分割する場合は論理的なまとまりで区切る

3. **ナンバリングの規則**
   - 要件定義書は100番台（1XX）のナンバリングを使用する（例：`101_specification.md`）
   - 関連性の高い機能は近い番号を割り当てる
   - 大きな機能カテゴリが変わる場合は、番号の間隔を空ける（例：101-109が認証関連、110-119がUI共通コンポーネント、120-129がページ構成など）
   - 対応する設計方針書は200番台（2XX）、タスク文書は300番台（3XX）で同じ下2桁を使用する
     - 例：要件定義書が`101_specification.md`の場合、対応する設計方針書は`201_design-doc.md`、タスク文書は`301_task.md`

### 相互参照の管理

1. **参照リンクの形式**
   - ファイル間の参照は `[機能名](1XX_specification.md)` の形式で記述する
   - 設計方針書への参照は `[機能名 設計](2XX_design-doc.md)` の形式で記述する
   - 特定のセクションへの参照は `[機能名 > セクション名](1XX_specification.md#セクション)` の形式で記述する

2. **全体像の把握**
   - 複数ファイルに分かれる場合は、索引となる `100_index.md` を作成することを推奨する
   - 索引ファイルには全体の構成と各ファイルの概要を記載する

3. **一貫性の維持**
   - ファイルを分割・追加する際は、関連する全てのファイルの相互参照を更新する
   - 命名規則と構成を一貫させる

## 付録：具体的な例

### 複数ファイルの構成例

#### 100_index.md
```markdown
# 要件定義書索引

このドキュメントは要件定義書の全体像と各ファイルの概要を示します。

## 要件定義書一覧

### 認証機能
- [ユーザー認証](101_specification.md) - ログイン・登録・パスワードリセット
- [権限管理](102_specification.md) - ユーザーロールと権限設定

### コンテンツ管理
- [記事管理](105_specification.md) - 記事の作成・編集・公開
- [メディア管理](106_specification.md) - 画像・動画のアップロードと管理
```

#### 101_specification.md
```markdown
# ユーザー認証 要件定義書

## 📑 関連ドキュメント

- [要件定義書索引](100_index.md)
- [権限管理](102_specification.md)
- [ユーザー認証設計方針](201_design-doc.md)

## 📋 概要

ユーザーのログイン、登録、パスワードリセットなどの認証機能について定義します。

...（他のセクション）
```

#### 105_specification.md
```markdown
# 記事管理 要件定義書

## 📑 関連ドキュメント

- [要件定義書索引](100_index.md)
- [メディア管理](106_specification.md)
- [記事管理設計方針](205_design-doc.md)

## 📋 概要

ブログ記事の作成、編集、公開などの機能について定義します。

...（他のセクション）
```

### ファイル分割の例

機能が拡大し、1つのファイルが500行を超える場合：

1. 論理的な区切りで分割する
   - 例：「記事管理」が大きくなった場合
     - `105_specification.md` → 記事の基本機能
     - `107_specification.md` → 記事のカテゴリ・タグ管理
     - `108_specification.md` → 記事のコメント機能

2. 相互参照を更新する
   - 各ファイルの「関連ドキュメント」セクションに新しいファイルへのリンクを追加
   - 索引ファイル（100_index.md）も更新